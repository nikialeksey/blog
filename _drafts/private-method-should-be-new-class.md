---
layout: post
title:  "Приватный метод - повод для нового класса"
categories: java oop
---

Следующий код требует рефакторинга:
```java
public class MailingServiceImpl implements MailingService {

    @Override
    public sendMail(Message message) {
        Message signedMessage = addDefaultSign(message);
        ...
    }

    /**
     * Добавление подписи по умолчанию
     * @param message сообщение
     * @return сообщение с подписью
     */
    private Message addDefaultSign(Message message) { ... }
}
```
Конкретно, метод `addDefaultSign` нужно вынести в отдельный сервис.
Почему?

Приватный метод имеет `javadoc` - видимо, его автор надеялся так 
объяснять его предназначение, ведь по-другому никак не удастся. Но все
равно пользуясь сервисом `MailingServiceImpl` надо всегда держать в
голове то, что он добавляет к сообщению подпись. Более того. если вдруг
заказчик придет и скажет, что ему нужно рендерить письмо перед
отправкой, то как можно решить эту проблему? Скопировать метод
добавления подписи в класс отрисовки письма или Добавить метод отрисовки
в сервис отправки почты? Оба решения - катастрофа для кода в проекте.

Потому что сервис отправки почты должен заниматься только отправкой
почты и ничем другим. Конечно же, отправка почты - это размытое
определение, но в него точно не входит корректировка письма. Необходимо
сформировать сообщение заранее и передать его в сервис отправки почты.

> Когда хочешь написать `private` метод, всегда думай, а не повод ли
это для нового класса

Это можно сделать, например, с помощью декоратора:
```java
class SignedMessage {
    public SignedMessage(Message origin) { ... }
}

...

MailingService mailingService;
Message message;

...

mailingService.sendMail(new SignedMessage(message));

```

---

Существуют много примеров `private` методов, которые не нарушают SRP,
но в своей практике я вижу очень часто такой код, занимающийся
совершенно не делами сервиса, в котором он находятся. Создавая
приватный метод, нужно подумать, действительно ли его место в этом
классе?